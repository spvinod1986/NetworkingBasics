# Networking Basics
- Computer communicates similar to Human. Humans follows a series of rule during communication. For example, start with a greet and end with a greet. If there is a loud noise then the one person should ask other person to repeat what they just said. This is called protocol. A protocol is a defined set of standards that computers must follow in order to communicate properly.
- Computer networking is the name we have given to the full scope of how computers communicate with each other.
- Lots of models used in Computer Networking. TCP/IP is 5 layer model. OSI model is 7 layer model. These 2 are few of the famous models.

## TCP/IP 5 Layer Model
- Physical Layer: Represents the physical devices that inter connects computers. This includes specifications for network cables, connectors and specifications for sending/receiving signals.
- Data Link Layer: This is also called Network Access Layer. This is the layer where protocols will be introduced. This layer is responsible for defining a common way of interpreting these signals so network devices can communicate. Lots of protocol exist in this layer. The common one is Ethernet. The Ethernet standards also define a protocol responsible for getting data to nodes on the same network or link. Responsible for sending data across a single link.
- Network Layer: This is also sometimes called the internet layer. This allows different networks to communicate with each other through devices known and routers. A collection of networks connected together through routers is called Internetwork or Internet. Responsible for sending data across multiple networks. The most common protocol used in this layer is Internet Protocol or IP. IP is the heart of the internet and most smaller networks around the world.
- Transport Layer: Network layer delivers data between 2 individual nodes. Transport Layer sorts out which client and server programs are supposed to get that data. For example - In your desktop, you can have mail client and browser client open at same time both receiving data from servers at same time. Transport layer makes sure that each app receives its own data. The most common protocol in this layer is TCP or Transmission Control Protocol and UDP or User Datagram protocol. Difference between TCP and UDP - TCP ensures data is reliably delivered.
- Application Layer: Application specific layer. Most common protocol used in this layer is HTTP(browse the web), SMTP(protocol to send/receive mail).

### Networking Devices Basics
- Cables: Connects different devices to each other, allowing data to be transmitted over them. 2 categories. 1) Copper and 2) Fiber. 
- Copper Cables: Data is send over network as 0 and 1. Uses electrical voltage send 0 and 1. Most common twisted pair copper cables used Cat5(older), Cat5e, and Cat6 cables. Cat5e avoids cross talk. Cross talk is when an electrical puls on one wire is accidentally detected on another wire. Cat6 can data transfer fast and more reliably.
- Fiber Optic Cables: Contains individual optical fibers, which are tiny tubes made out of glass about the width of human hair. Uses of pulses of light to send 0 and 1.
- Hubs: This is a physical layer device that allows for connections from many computers at once. All computers in hub can send data between one another and each computer responsible for finding the data it requires. This causes lot of noise and leads to collision domain. Collision domain is a network segment where only one device can communicate at a time. so when one device is sending data, others should wait.This causes network delay and hence hubs are historical.
- Network Switch: Switch is a data link devices instead of physical layer device. This means switch can look at Eternet protocol data and see which system the data is intended for and only send data to that one system. Reduces collision and increases throughput.
- Routers: Hubs and Switches are primary devices used to connect computers on a single network usually referred to as LAN or Local Area Network. To send data to other networks we need routers. Routers is a device that knows how to forward data between independent networks. Router is Network Layer device. It can inspect IP data to know where to send things. Router has routing tables to know how to send data. The routers used in home is a very smaller one and it is responsible to just route the data to Internet Service Provider. The ISP will have set of more sophisticated routers which deals with more complexity to send data between multiple routers. The core ISP routers uses protocol known as BGP(Border Gateway Protocol) to share data between routers which let them learn about most optinal paths between routers to forward traffic.
- Servers and Clients: All sending/receiving computers are commonly referred as Nodes. But they can be further classified as Server(Sending data) and Client(Requesting data). Individual programs running in a system can be server and client to each other as well. In a network, a primary purpose of a machine is identified to call it either a server or client.

### Physical Layer
- Protocol: 10 Base T, 802.11. Protocol Data Unit: Bit. Addressing: N/A.
- Most Complex Layer. Consist of devices to transmit bit across network. Bit is 1 or 0. Copper cable carries this bit using Modulation. Modulation is a way of varying the voltage of the charge moving across cable. With respect to networking it is called Line Coding. So the encoder in sender converts digital data to signals(using modulation) and the receiving device decodes the the data bacck to digital data.
- Twisted pair cable is the most commonly used. cat 6 has 8 wires and 4 pairs of twistes cable. This allows duplex communication where 2 pairs are used for one way and other 2 pairs for the other way. Duplex is the oncept that information can flow in both directions across the cable. Simplex is unidirectional(example: Baby Monitor).
- Network Ports and Panels: RJ45 plug is the plug at the either end of copper cable which fits in RJ45 network port. This network port is directly attached to computing devices. Most of servers/computers have this port. Mobiles/laptop may use wireless networking and hence may not carry this port. This plug will have 2 lights. one is Link LED(will lit when cable is connected properly between 2 devices and both are powered on) and another is Activity LED(lit when data is transmitted). The same lights can be used in switches as well. Sometimes the network ports are mounted in wall and all these ports connect to Patch panel. Patch Panel is device containing many network ports and then additional cable is run to Switches or Routers.

### DataLink Layer
- Protocol: Ethernet, WiFi. Protocol Data Unit: Frames. Addressing: MAC Address.
- The responsibilty of this layer is to abstract the physical layer so that higher layers do not need to care about the physical devices used.
- Ethernet standard is very old and from 1980s. The ethernet standard today is very similar to that except for few changes to support higher bandwidth. Ethernet avoids data collision domain using CSMA/CD. CSMA/CD is used to determine when the communication channels are clear, and when a device is free to transmit data.
- MAC(Media Access Control) Address: This is a globally unique identifier attached to an individual network interface. It is a 48 bit number represented by 6 groupings of 2 hexa decimal numbers. It can also be represented using Octets. This address is globally unique. 2 power 48 is trillion possibility. It can be split in to 3 sections. The first 3 octets of MAC address is OUI(Organizationally Unique Identifier). These are assigned to individual hardware manufacturers by IEEE. It is 24 Bits/6 Hex digits/eg: 00 60 2F. The last 3 octets can assigned anyway a manufacturer would like but it should be used only once.
- Ethernet uses MAC addresses to enure that the data it sends has both an address for the machine that sent the transmission as well as the one the transmission was intended for.
- Unicast: Unicast: Transmission for one receiving address. If the least significant bit in the first octet of a destination address is set to Zero, it means that ethernet frame is intended for only the destination address. In ethernet, the data will be send to all devices in Local Network segment but only one will receive and process it.
- Multicast: Transmission for 2 or more receiving address. If the least significant bit in the first octet of a destination address is set to One, then it is a multicast frame. In ethernet, the data will be send to all devices in Local Network segment but only 2 or more devices will receive and process it.
- Broadcast: Transmission to all address. Broadcast address is all F's(FF:FF:FF:FF:FF:FF).
- Data Packet: An all-encompassing term that represents any single set of binary data being sent across a network link. This is just a concept of sending set of data from Point A to point B.
- Data packet at ethernet level is called Ethernet Frames. Ethernet frame is a highly structured collection of information presented in a specific order.
- Ethernet Frame: 8 bytes of Preamble, 6 bytes of Destination Address, 6 bytes of Source Address, 4 bytes of VLAN Tag, 2 bytes of Ether-type, 0 - 1,500 bytes of Payload, 4 bytes of FCS. Last bit in Preamble is SFD(Start Frame Delimiter) which signals receiving device that the preamble is over and the frame contents will now follow. Ether type is used to describe the protocol of the contents of the frame. VLAN header indicates that the frame itself is what's called VLAN frame. VLAN or Virtal LAN is a technique that allows you to have mutiple logical LANs operating in the same physical equipment. Helps to have single LAN that operates similar to having multiple LANs. Payload is the actual data being transported which is everything that is not a header. This contains all of the data from higher layers. FCS(Frame check sequence) represents checksum value for entire frame. The checksum value is calculated using Cyclical Redunancy Chdck. CRC is an important concept of computing and used everywhere for data integrity. CRC uses polynomial function to calculate the checksum number from a given data. Then in receiving end the CRC is done again on received data and the checksum is verified to be same. This helps the receive to find if there is a lost or corrupted data. If there is corrupted data then the higher layer will decide if the data should be retransmitted.

### Network Layer
- Protocol: IP. Protocol Data Unit: Datagram. Addressing: IP Address.
- In LAN, systems can communicate with one another using MAC addresses. But this cannot scale for large distance communication because MAC addresses are not ordered (a system with a MAC address can be anywhere in the world). The Network layer and the internet protocol is the solution for that problem.
- IP Addresses: 32 bits long; 4 Octet; 1 Octet/8 bits of data. Represented by dotted decimal notation.
- IP Addresses are distributed to various companies or organization and hence the router will know to which router a request should be forwarded to based on address. IP Addresses belong to networks, not to the devices attached to those networks. Hence MAC address will remain same where you connect, but IP address changes based on where you connect.
- When you connect a device to network, IP address is assigned automatically using Dynamic Host Configuration Protocol. This is called Dynamic IP address. Static IP addres is the one configured manually. Static IP addresses are reserved for servers and network devices while dynamic IP addresses are reserved for clients.
- IP Datagrams: Data packet at network layer is called IP datagram. It is highly structured series of fields that are strictly defined. IPv4 is the version currently used. The IP data packet has more information than data link layer. Version(IPv4 or IPv6), Header length, service type(QOS - helps which IP data is more important than other), total length, identification (A single datagram is about 65535(maximum value of 16 bits). If the total amount of data that needs to be sent is larger than what can fit in a single datagram, the IP layer needs to split this data up into many individual packets. If this happens then identification fields is used to find every packet is part of same transmission.), flag field(to indicate if the data can be fragmented), fragment offset (required to fragment datapackets in to smaller data packets if data is moved between networks which accept different data packet size), Time to Live(indicates how many router hops a datagram can traverse before it is thrown away), protocol (indicates trasport level protocol used (tcp/udp)), Header checksum (checksum for entire IP header), source ip address,  destination ip address, IP options field (used to set special characteristics for testing purpose), padding field (this is series of 0's to maintain length).
- The data payload section in Ethernet data packet is exactly same as IP datagram.This is called encapsulation. IP datagram also has a payload section which carries TCP/UDP datagram.
- IP address can be split in to 2 sections. 1) Network Id and 2) Host Id. For example: 9.100.100.100, 9 or the first octet is the NetworkID and reminder are host ID. IP address class system is the way of defining how the global IP address space is split up. 3 types of Address Classes. 1) Class A (first octet is used for network ID and reminder for Host ID)2) Class B(first 2 octets used for network ID and reminder for Host ID) and 3) Class C(first 3 octets are used for network ID and final octet to host ID).
- Class A address starts with 0 and the possible values are 0 - 126. Class B address starts will 1 and the possible values are 128 - 191. Class C address starts with 10 and possible values are 192 - 224. Class D and E are not so important and used for multi casting and testing.
- ARP (Address Resolution Protocol) - Used to discover hardware address of a node with certain IP address. ARP table is the list of IP addresses and the MAC addresses associated to them. ARP table generally expires after a short amount time to ensure changes in the network are accounted for.
- Subnetting: Subnetting is the process of taking large network and split in to smaller subnetworks.
- Subnet masks: so when a data is send to 9.0.0 class A address, the core routers send the data to gateway router of 9.0.0 class A address. Then the gateway router locates the system using host ID and sends the data to system. But in class A you can have around 126 million host ID's. so for such cases you may need subnet where the gateway router can send the data to subnet router and that sends the data to system. This results in another ID called Subnet ID. The subnetId is part of HostId and is calculated using Subnet Mask. A subnet mask is a way for a computer to use AND operators to determine if an IP address exists in same network.
- CIDR (Classless InterDomain Routing): Using CIDR, the network ID and subnet ID are combined in to one.
- Routing: Routing is the process of routing data from network A to network B. The data will hop off between different router until it reaches final destination. Routing is done using Routing table which will have 4 columns. Destination column(IP and net mask), Next hop(IP address of next router intended to destination), total hops(used to calculate shortest path), interface. Core router will have millions of rows in routing tables. Routing tables are always updated to find shortest path to destinations aorund them. They use Routing protocols which is a special protocol used by routers to speak with each other. 2 categories of Routing protocols. 1) Interior gateway protocols and 2) Exterior gateway protocols.
- Interior gateway protocols are used by router to share information within a single autonomous system(collection of network that all fall under single network operator). Exterior gateway protocols are used by router to share information between independent autonomous systems.
- 2 types of Interior gateway protocols. 1) Link state routing (each router propagates its state to every other router in autonomous system) 2) distance vector(older standards - a router takes its routing table and sends to every router. In computer science, a list is called as vector).
- Exterior gateway protocols: IANA or Internet Assigned Numbers Authority is a non-profit organization that helps manage things like IP address allocation. IANA is also responsible for autonomous sytem number allocation. ASN's are 32 bits number assigned to autonomous systems. Looking at ASN routers can find to which autonomous network or organisation the data should route to.
- Non Routable address space - IP address is a 32 bit number which represents 4 billion unique numbers. But there are 2017 8 billion people on earth. Hence IPv4 standard does not even have enough IP addresses available for every person on planet. Hence 3 ranges of IP address are kept seperately as non routable address space which can be used by anyone but they will not be routed to by any gateway router. 1) 10.0.0.0/8 2) 172.16.0.0/12 3) 192.168.0.0/16. These ranges are free for anyone to use in their internal network. Hence Internal gateway protocols will know about it but exterior gateway protocols will not know about it.

### Transport Layer
- Protocol: TCP/UDP. Protocol Data Unit: Segment. Addressing: Port numbers.
- This layer allows traffic to be directed to specific applications.
- Transport layer can Multiplex (nodes on network direct traffic from many different services) and Demultiplex traffic (nodes on network receive traffic from many different services).
- Transport layer does multiplexing and demultiplexing using Ports. A port is a 16 bit number that is used to direct traffic to specific services running on a networked computer. A service in the server listens to an incoming request in specific port. For example: a service which listens to HTTP protocol listens at port number 80 and hence the address will be 10.1.1.100:80. This is called Socket number.
- TCP segment: IP datagram(payload section) encapsulates TCP segment. TCP segment is made of TCP header and data(payload) section. Source Port(ephemeral port), Destination Port(port 80 for web server), Sequence number(to keep track of tcp segments), Acknowledgement number(number of next expected segment), Header Length, Control flags, Windows(specifies the range of sequence number before acknowledgement is required), checksum, Urgent (used with TCP flags to find the segments more important than another), Options, Padding, Data Payload.
- Control Flags: URG - A value of one here indicates that the segment is important. ACK - A value of one here indicates Acknowledgement number should be examined. PSH - The device wants the receiving device to push currently buffered data to the application on the receiving end as soon as possible. RST - one of the TCP connection had not been properly able to recover from a series of missing segments. SYN - Used when first establishing TCP connection and makes sure the receiving end knows to examine the sequence number field. FIN - A value of one here means the transmitting computer does not have any more data to send and connection can be closed.
- TCP traffic flow: Computer A first sends segment with SYN flag to computer B. This is way computer A is saying lets establish a connection and see where my sequence number starts. B then responds with TCP segment with both SYN/ACK flags set. This is how computer B says lets establish a connection and here is my acknowledgement. Computer A then responds with only ACK flag set. A says I acknowledge your acknowledgement. This is called 3 way handshake and it happens everytime a TCP connection is established. As now both A and B has established connection using 3 way handshake, both the computers are now operating in full duplex. Now A can send any data to B. Each segment send in either direction should be acknowledged with ACK segment. When A is ready to close, then four way handshake happens. A sends FIN, and B responds with ACK, and then A sends FIN again and B sends ACK again.
- TCP Socket States: A socket is an instanatiation(actual implementaion of something defined else where) of an end point in a potential TCP connection. TCP sockets requires actual programs to instantiate them. You can data to a computer in any port you want but you will actually get a response only if the program in that computer has opened a socket to that port. 
- TCP sockets can exist in lot of state. Here are the common ones. LISTEN - TCP socket is ready and listening for incoming connections. You will see this in server side only. SYN_SENT - A synchronization request has been sent but the connection has not been established yet. You will see this in client side only. SYN-RECEIVED - A socket previously in LISTEN state has received a synchronization request and sent as SYN/ACK back. This is seen in server side only. ESTABLISHED - TCP connection is in working order and both sides are free to send each other data. Seen in both client and server.FIN_WAIT - A FIN has been sent but the corresponding ACK from the other end has not been received yet. CLOSE_WAIT - The connection has been closed at TCP layer but the application that opened the socket has not released its hold on the socket yet. CLOSED - the connection is fully terminated and no further communication is possible.
- TCP is a connection oriented protocol. Connection Oriented protocol is the one which establishes a connection, and used this to ensure that all data has been properly transmitted. Every segment sent is acknowledged. There is a lot of overhead on this protocol and connection less protocol or UDP do not have this overhead. Streaming video is an example of UDP.
- Firewalls: A device that blocks traffic that meets certain criteria. Required to keep network secure. It can work in lot of layers. There are firewalls which can work in application layer, blocking ranges of IP address. It is most commonly used in Transport layer. Usally have configuration to block traffic for certain ports while allowing traffic for other ports.

### Application Layer
- Protocol: HTTP, SMTP, FTP etc. Protocol Data Unit: Messages. Addressing: N/A.
- This layer allows applications to communicate in a way they understand.
- TCP segment payload section encapsulates the application layer protocol message. This protocol depends on the application. HTTP protocol to talk between web browser in client and web server (IIS/APACHE/Nginx).
- OSI: Open Systems InterConnection Model has 7 layers and introduces 2 new layers between Transport layer and Application Layer. 1) Session Layer - Facilitating communication between actual applications and transport layer. Takes the application layer data and hands it off to the presentation layer 2) Presentation Layer - Responsible for making sure that the unencapsulated application layer data is able to be understood by the application in question.

## Networking Services
- We should be knowledgable about multiple networking services which enables internet to triage a network issue.

### DNS
- DNS: IP is 32 bit binary number but it is usually written in 4 octet decimal form because it is easier for humans to read. MAC address is also 48 bit binary number which is written using 6 grouping of 2 hexadecimal numbers each. Humans cannot remember multiple IP addresses but if it words it is more easy to remember. That is where Domain Name System helps. Domain Name System is a global and highly distributed network service that resolves strings of letters in to IP Addresses for you.
- Domain Name: The term we use for something that can be resolved by DNS. Even if IP address of a web server changes, you can change the mapping between Domain name and Ip address and the end user will never know about that. Hence it also allows administrative changes to happen behind the scene.
- DNS also helps in distributed web server. For example, some one from New York visiting your website will be served by web server in Data Center located near New York. And some one from New Delhi visiting your website will be served by Data Center located near New Delhi. DNS helps provide this functionality by helping organisation decide to resolve domain name with different IP's as per region.
- Name Resolution: DNS resolves domain name to IP address. This process is called Name Resolution. DNS Servers is the one of the first thing to be configured on a node in a network. 
- For a computer to operate in modern network, they need to have certain number of things configured. They are 1) IP Address 2) Subnet mask 3) Gateway for a host and 4) DNS/Name Server. A computer can operate fine without DNS server configuration but it makes life diffcult for human to access the computer always with IP addresses.
- 5 types of DNS Servers. 1) Caching Name Servers 2) Recursive Name Servers 3) Root Name Servers 4) TLD Name Servers and 5) Authoritative Name Servers.
- Caching and Recursive name servers(performs full DNS resolution requests) are provided by an ISP or local network. Their purpose is to store know domain name lookups for a certain amount of time. TTL or Time To Live is the value in seconds that can be configures by owne of domain name for how long a name server is allowed to cache an entry before discard it and perform a full resolution again.
- Steps done by Recursive Name server to do a full DNS resolution requests - The Recursive Name server will first call one of 13 Root Servers with a DNS lookup request(Note - Port 53 is the default port for DNS lookup in Recursive Name Server). These root servers are responsible to respond with specific TLD(Top Level Domain) Name Server that should be queried for DNS lookup. These root servers in the past were distributed across specific geographical region but now it is distributed using Anycast. Anycast is a technique that is used to route traffic to different destinations depending on factors like location, congestion, or link health. TLD is the last part of any Domain name. For example if you do DNS lookup for www.weather.com, the .com portion should be TLD. For each TLD in existence there is a TLD Name Server(this is not just one server, it can be globally distributed Anycast responsible servers). The TLD server will respond back with a redirect with name of one of Authoritative Name Servers to contact. Authoritative Name servers are responsible for last 2 parts of any domain name and can be controlled by the organisation. For example. The TLD will responde for DNS lookup request of weather.com of one of the authoritative servers controlled by Weather Channel that runs the site. Then the Recursive Name server calls this server which will respond back with actual IP of the domain name. Your local computer or mobile phone will have its own temporary DNS cache as well.
- DNS is a good example of application layer service that uses UDP in transport layer. If we try to DNS lookup with TCP then it will result in 44 packets transmission where as UDP requires only 8 packets. Something as simple as DNS does not need TCP. Because the server can ask again if there is no response. DNS over TCP do exist if for some case the datagram is too large and cannot be responded with one packet.
- Resource Record Types: DNS in practise operates with set of Resource Record Types. These record types helps with different kind of DNS resoltions to take place. There are dozens of Record Types. The common ones are 1) A record - This is used to point a certain domain name at a certain IPv4 address. DNS can used round robin to do DNS lookup. For example, Microsoft is a large organisation and ther website will have huge traffic. To help balance traffic across multiple servers we may need to configure 4 A records for www.microsoft.com at Authoritatice Name Server for Microsoft.Com domain. The IP's can be 10.1.1.1, .2, .3, .4. When DNS resolver performs a lookup all four IP's configured will be returned. But the DNS resolving computer will pickup the first one(10.1.1.1) though it knows about all 4 just in case the connection to first one fails. The next computer to do the lookup will also receive all 4 IP's but the ordering must have changed with 10.1.1.2 as the first one. This is how round robin works. 2) AAAA - Quad A - This is used to point to Ipv6 address. 3) CNAME (Canonical Name)- This record is used to redirect traffic from one domain to another. It is used to redirect lookup for "microsoft.com" to "www.microsoft.com". You can also opt to have 2 A records, one for "microsoft.com" and another for "www.microsoft.com" pointing to same IP address. But in case IP changes you should remember to update both records.4) MX record (mail exchange) - This is used to deliver email to company's mail server.5) SRV record(Service Record) - This is used to point to specific services. MX is just for mail services where as SRV is used for many different services.6) TXT record(Text) - used to communicate configuration services.
- Domain Name has 3 parts. 1) .com is the TLD or Top Level Domain. There were certain number of restrictive TLD's like .com, .org, .Aus etc. But due to growth of internet many of defined TLD's became crowded. Hence today many of valid TLDs are availble. Admininstration ot TLD is done by group called ICANN - The internet corporation for assigned names and numbers. This is a sister organisation of IANA. 2) .google or .microsoft is the Domain. This is used to demarcate where control moves from a TLD name server to an Authoritative Name Server. This is under control of independent companies or some one outside of ICANN. Doman can be chosen by any company as per their need but they should end with one of predefined TLD.3) The www portion is referred as subdomain or host name. When you combine all 3 parts together you have what is known as Fully Qualified Domain Name(FQDN). The domain name will cost money but you can have multiple subdomains for same domain for free.
- A registrar is a company who has a agreement with ICANN to sell unregistered domain names.
- DNS can technically support up to 127 levels of domain in total for a single fully qualified domain name. Complete FQDN is restricted to 255 characters.
- DNS Zones: Authoritative Name Server is also responsible for specific DNS zones. DNS zones allow for easier control over multiple levels of a domain. For example , a company abc.com located in New York, LA and New Delhi can have 3 DNS zones with different subdomain like ny.abc.com, la.abc.com, nd.abc.com. Now they will need 4 authoritative servers, one for each new subdomain and one for abc.com. Zone files are simple configuration files that declare all resource records for a particular zone. The zone file includes SOA or Start of Authority which declares the zone and the name of the name server that is authoritative of it. You can also find NS records indicate other name servers which are also responsible for this zone. You can also find other record types.
- Reverse Lookup Zone Files: These let DNS resolvers to ask for an IP and get the FQDN associated with it returned. These files are same as zone files but instead of A and Quad A records which will resove to IPs, you will find Pointer Records (Resolves IP to a name).
- Dynamic Host Configuration Protocol(DHCP): An application layer protocol that automates configuration process of hosts on a network. Every node in a network needs IP address, subnet mask, gateway host, Name server. Most of the nodes in a network will have same subnet mask, gateway host and name server except for IP address. DHCP helps in this configuration. A machine can query to DHCP server when the computer connects to a network and recieve all network configuration in one go. DHCP reduces administrative over head on configuring individual nodes, it also helps to address the problem to choose what IP to be assigned to what machine. Static IP's are required only for servers like Gateway servers,DNS servers which will help to diagnose problems in these server if they malfunction by connecting to it using servers. But all nodes will not require such static IP.
- DHCP can help to configure IP address for a machine when they need one from a range of IP addresses.
- DHCP can operate in few standard ways. 1) Dynamic Allocation - A range of IP addresses is set aside for client devices and one of these IPs is issued to these devices when they request one. 2) Automatic Allocation - A range of IP addresses is set aside for allocation. The difference is that in this case the DHCP is asked to keep track of which IP is assigned to which machine in the past and hence return same IP address for the same machine if possible. 3) Fixed Allocation - This requires a manually specified list of MAC address and their corresponding IPs.
- DHCP can also configure multiple things. one of other common is NTP server. Network time protocol server is used to keep all computers on a network synchronized in time.
- DHCP Dicovery: This is the process by which a client configured to use DHCP attempts to get network configuration information. This process has 4 steps. 1) Server Discovery - The machine sends DHCP Discover message in to the network as broadcast message. The client still do not have any IP address and hence specific DHCP datagram is build and send. The DHCP server listens in port 67 and the source sends the DHCP UDP message from port 68. The DHCP Discover message is encapsulated in UDP datagram which in turn is encapsulated in IP datagram with destination as FF.FF.FF.FF:67 or 255.255.255.255.67 and source port of 68. This gets delivered to every node in LAN and the DHCP server will consume it. The DHCP then responds back with offer message with source port of 67 with its own IP address to a destination of 255.255.255.255.68. This is also a broadcast and hence will reach every node in network. But DHCP will include Mac address of machine that send Discover message in its respone message so other can discard it. Once the machine receives it then the machine will send DHCPREQUEST message stating that it would like to have the IP offered. This is again send from 0.0.0.0:68 to 255:255:255:255:67. The DHCP then responds with DHCPACK or acknowledgement message from its source address and port 67 to everyone in the network. The client can now use the configuration send by DHCP for its own configuration. This configuration can last for days or months based on DHCP lease. Once the lease is expired the client should renew the lease by performing all the operations again. The client can also end the lease when it disconnects from the network.

### NAT
- Network Address Translation is technique instead of defined standard. Different OS and hardware vendors have implemented details of NAT in different ways. The concepts still remains same. 
- NAT translates one IP address in to another. The reason for doing this is Security safe guards and to use limited amount of available IPv4 address spaces.
- NAT is a technology that allows a gateway usually a router or firewall, to rewrite the source IP of an outgoing IP datagram while retaining original IP in order to rewrite it into the response.
- NAT hides the IP of computer A to computer B by rewriting the request source to be itself. This is called IP masquerading. 
- In one to many NAT , a single or multiple nodes in a network can get its IP translated to a single IP. This is easy for request but for responses it is tricky. Now we will end up with 100 of responses all directed to same IP. Now the router need to figure out which responses goes to which computer. This is done
through Port Preservation.
- Port Preservation is a technique where the source port chosen by a client is the same port used by the router. So when the response comes back to the router it uses same port number in destination and request can use this to identify the machine. In this technique there are some cases where 2 computers can choose same port to send the request. When this happens the router will select random unused port for one the request.
- Another technique is Port Forwarding where specific destination ports can be configured to always be delivered to specific nodes.
- IANA is responsible for allocating IP address to organisations. There are 5 subdivisions of IANA as per geographies to allocate IP addresses to companies in those geographies. They all ran out of IP addresses between 2011 to 2015. Africa division still have few IP addresses but that will run out soon. This problem will be resolved by allocating IPv6 addresses but that implementation will take time. Until then as a work around NAT and Non Routable Address Space(NRAS). So the companies can use Non Routable Address space internaly use NAT to expose just one public IP address for the organisation. This will enable all computers within the company to send/receive traffic in internet.

### VPN
- All companies want to keep their network secure. They can keep it secure by using firewall, NAT, Non Routable Address Space etc. All companies have proprietory information that should remain secure and allow only employees to access.One of the easiest way to keep network secure within an organisation is to use the various security technologies so that only the machines physically connected to their LAN can access these resources. But employees may not be always in office and they may be in business trip or work from home and they need to access these resources. VPN helps to address this problem.
- VPN or Virtual Private Network is a technology that allows for the extension of a private or local network to hosts that might not be on that local network.
- VPN is used by employees to access their company network when they are not in office. VPN is a tunneling protocol which means they provision access to something which is not locally available. Establishing a VPN connection = VPN tunnel being established.
- An employee will use a VPN client (many available in market) to establish a VPN tunnel to their company network. This would provision the machine with a virtual interface IP which is equal to the address space of the network they established connection to. They can send/receive data through this virtual interface as if they are physically connected to their private network. Most VPN uses payload section of transport layer by having encrypted payload which contains second set of packets(which includes network, transport and application layer info). The VPN endpoint or server will take this payload and creates new packet with this payload and sends it out in the new network. The inverse happens for the response.
- VPN requires strict authentication from the user. 2 factor authentication is used.
- VPN can also be used to establish site to site connectivity. The technology used is similar except there will be VPN servers at both end point. This is used by companies in 2 different locations to use single network.
- VPN like NAT is a technology concept and not a protocol. Hence different vendors have different implementations.

### Proxies
- A server that acts on behalf of a client in order to access another service.
- Proxies sits between client and server to help with Anonymity. Security, Content Filtering and Increased performance.
- The concept of proxy is same as Gateway Router. 
- There are many proxy concepts implementation in network and some of the common ones are 1) Web Proxy - This is a proxy between client and web server. There are various applications of web proxy. Earlier companies used to cache pages but it is not in much use. A company might decide to block twitter/facebook in their company network during work hours. They can do that using web proxy. 2) Reverse Proxy - This is service that might appear to be a single server to external clients, but actually represents many servers living behind it. All famous websites are architected using this. Famous websites receive so many requests that single web server cannot handle it. The reverse proxy server will be between multiple web servers and client and the client is aware of onlt this reverse proxy server. This proxy can then redirect request to various web servers similar to load balancing. Another use of Reverse proxy is to encrypt and decrypt messages/packets, so that the web server can just focus on serving content.

## Internet Connections
- First research by Duke University students found that they can use Public Service Telephone Network or PSTN (is also referred to as Plain Old Telephone Service) to send/receive data. Later USENET was developed using this principle and then this became the base for dial up connection. The connection is established by dialing a phone number.
- Transferring data through dial up connection is done through devices called Modem. Modem stands for Modulator/DeModulator. This modem take care of converting digital data from computers to audio waves in phone lines. Early phone connections had very low Baud rate. A Baud rate is a measurement of hoe many bits can be passed across a phone line in a second. The maximum rate of transfer was 110 bits per second. USENET was able to transfer at 300 bps. Dial up can do at 14.4 kbps.
- Broadband: Any connectivity technology that is not dial-up internet. Broadband connections are always ON. 4 common broadband technologies available today.
- T-Carrier Technologies : Invented by AT&T to allow lot of phone calls in single line called T1 line (24 phone calls in one twisted pair of copper) and it is capable of transmitting data at 1.544 MBPS. Later T3 line is introduced which is 28 lines of T1 which increased the throughput to 44.736 MBPS.
- DSL : Digital subscriber line uses phone connection where the frequency of data is different from phone calls(no interruption betwee both) as all modern phone lines started using twisted copper wire. DSL uses their own modems calles DSLAMs or Digital Subscriber Line Access Multiplexers. The connection is established when DSLAM is powered on and closed when DSLAM is powered off. DSL is of 2 types. ADSL - Asymmetric Digital Subscriber Line which featured different speeds for download and upload. Lower cost. SDSl - Symmetric Digital Subscriber Line which featured same upload and different speeds.
- Cable Broadband : Television network started of as wireless in 1950. There were many television towers which broadcast signals and people can catch those in their antennas and watch TV. This is possible only if people is in range of one of the towers. Cable Television companies started laying out cable to transmit television signals over cable and there was a boom of cable TV in 1990. By then the cable TV connection network is equal to Phone line network. With boom of internet, cable TV companies were planning to provide to internet connections using their vast cable network by sending internet data in different frequency that TV data in same wire. This is called Shared bandwidth technology. This is managed by Cable Modem. The Cable Modem Termination System(CMTS) connects lots of different cable connections to an ISPs core network.
- Fiber Connections : Fiber uses light and hence it is faster and can travel long distance without losing data. Fiber is expensive. FTTX - Fiber to the X. FTTN - Fiber to the Neighbourhood (Fiber used till a cabinet or area and the copper is used for last length of distance), FTTB - Fiber to the building/business(Fiber used till building and then copper used within building), FTTH - Fiber to the Home. FTTB and FTTH can be commonly referred as FTTP or Fiber to the Premises. ONT or Optical Network terminator is sued to convert data from protocols the fiber network can understand to those that more traditional/twisted pair copper networks can understand.
- WAN: Wide Area Network acts like a single network but spans across multiple physical locations. A WAN setup requires a contract with ISP. This setup has few sections like each of the locations local network ends at a Demarcation point from where the local loop which can be fiber cable or T Carrier connects to the ISPs core network and internet at large.
- Popular alternative for WAN is Point to Point VPN also called Site to Site VPN. This is cheaper than WAN. Now a days companies are moving to cloud whether ther can have their mail servers hosted in Cloud and few other servers in on prem. They can use VPN tunnel between 2 sites or servers.

### Wireless Networks
- The most common framework or standards on how wireless devices should communicate is framed by IEEE 802.11 standards. This set of specifications also called 802.11 family also makes Wifi. They transfer data using radio waves. All 802.11 family uses radio wave but in different frequency bands. Frequency band is a certain section of the radio spectrum that is been agreed up on to be used for certain communications. WIFI operates at 2.4 Ghz and 5 Ghx frequency band. 
- Access Point - Wireless access point is a device that bridges the wireless and wired portions of a network. There can be more than one access point and the device connects to nearest access point with highest strength.
- They operate at physical and data link layer. The 802.11 frame has number of fields. Frame Control (version of 802.11 used), Duration (length of frame), 4 address fields (for specifying access points) - usually one for source address field which specifies the mac address of the device sending the data, destination address, receiver address/mac address of access point, transmitter address/ mac address of access point.Sequence control- to keep track of frames order and Data Payload - to encapsulate top layer payloads and FCS - Frame Check sum.
- Wireless Network Configurations: 1) Adhoc: every devide communicates with every other device in range. Used in phones when other phones in same network can transfer photo etc 2) Wireless LANS(WLANS): Most common type. Consist of one or more access points which acts as bridges between wireless and wired 3) Mesh Networks: Like adhoc network forming a Mesh and connects to access point which connects to Wired.
- Wireless Channels: Individual, smaller sections of the overall frequency band used by a wireless network. Collision domain do happen in wireless network when 2 or more devices try to send/receive data at same time. In wired network, switches helps to reduce collision domain but in wireless there is no concept of swicthes. Wireless channels help to solve this problem to some extent. The wireless frequency at 2.4 Ghz band operates between multiple channels between 2.4 and 2.5 GHz each with a width of certain MHz. Avoid collision domains whereever you can. Collision domains are a problem in wireless network.
- Wireless Security: WEP or Wired Equivalent Privacy is an encryption technology that provides a very low level privacy. It is a weak encryption algorithm. It uses 40 bits for encryption key. WEP is replcaed by WPA (WIFI protected Access). Uses 128 bits. Most commonly used is WPA2. uses 256 bits. Anoter way to secure wireless is using MAC filtering. You configure your access points to only allow for connections from a specific set of MAC addresses belonging to devices you trust.
- Cellular or Mobile Networks: Have lot in common to 802.11. They operate over radio waves. Have specific frequency bands and can travel longer distance. Each cell or area is assigned specific bands and they do no overlap.

## TroubleShooting
- Error detection: The ability for a protocol or program to determine that something went wrong.
- Error Recovery: The ability for a protocol or program to attempt to fix it.
- ICMP or Internet Control Message Protocol is used by router or message hosts to communicate back why there is a failure to origin of transmission.
- ICMP packet has few fields. Header and data section. Type (eg: destination unreachable), code(various codes for one type), checksum, rest of header(optional), data payload (failed payload).
- There are tools to check these ICMP packets. Ping is one of them.
- Ping: Ping lets yoy send a special type of ICMP message called an Echo Request. If the destination is up and running and able to communicate on the network, it will send back an ICMP Echo reply message type. Ping lets you know if you can reach to a computer on a network and the quality of the connection.
- TraceRoute: Sometimes you may also need to know where the problem exactly is. TraceRoute is a utility that lest you discover the path between 2 nodes, and gives you information about each hop along the way.
- mtr/pathping - mtr for linux/macos and pathping for windows similar to TraceRoute but it is long running.
- Port Connectivity: Sometimes we may need to know whether things are working at transport layer. 2 super powerful tools. netcat - linux/macos and Test-NetConnection - Windows. They provide more feature than port connectivity.
- Digging in to DNS - nslookup is most used tool in all 3 OS. 
- Public DNS Servers: An ISP almost always gives you access to a recursive name server as part of the service it provides. Public DNS Servers are name servers specifically setup so that anyone can use them for free. Level 3 communications which is larged ISP in world provides public DNS which is from 4.2.2.1 to 4.2.26. Google provides public DNS on 8.8.8.8 and 8.8.4.4. Most public DNS servers are available globally through anycast. Always make sure the name server is run by a reputable company and try to use the name servers providied by your ISP outside of trouble shooting scenarios.
- Registrar: Organization reponsible for assigning individual domain names to other organizations or individuals. Most notable is Network Solutions inc and today more than 100 companies. You buy domain from a registrar by paying money and register for some period of time. Then use registrars name server as Authoritative Name server for your domain or configure your own servers to be Authoritative. Domains can also be transferred from one registrar to another.
- The original way that numbered network addresses were correlated with words was through host files. A host file is a flat file that contains, on each line, a network address followed by the host name it can be referred to as. The operating system itself can look at host file and find the name of the server. All modern operation systems, even those that power our phones still have host files.
- Loop back Address: A loop back address always point to itself. It is way of sending network traffic to yourself. It will never leave the node. The loop back IP for Ipv4 is 127.0.0.1. It is configured in every modern OS in their host file. Almost every hosts file in existence will, in the very least, contain a line that reads 127.0.0.1 localhost, most likely followed by ::1 localhost, where ::1 is the loopback address for IPv6. Host files are a popular way for computer viruses to disrupt and redirect users traffic.

## The Cloud
- Public Cloud : A large cluster of machines run by another company.
- Private Cloud : Used by a single large corporation and generally physically hosted on its own premises.
- Hybrid Cloud: A term used to describe situations where companies might run things like their most sensitive proprietary technologies on a private cloud, while entrusting thier less-sensitive servers to a public cloud.
- A technological approach where computing resources are provisioned in a shareable way, so that lots of users get what they need, when they need it.
- Cloud Computing: A new model in computing where large clusters of machines let us use the total resources available in a better way.
- At the heart of cloud computing is a technology called Hardware Virtualization.
- Hardware Virtualization: It is a concept of physical machine and a logical machine to be astracted away from each other.
- Virtualization: A single physical machine, called a host could run many individual virtual instances called guests.
- Hypervsior: Each OS expects a certain way to communicate with underlying hardware. Hardware virtualization platforms employ something called Hypervisors. A Hypervisor is a piece of software that runs and manages virtual machines, while also offering these guests a virtual operating platform that's indistinguishable from actual hardware.
- With Virtualization, a single physical computer can act as host for many independent virtual instances. They each run their own independent operating system and in many ways are indistinguishable from the running physical hardware. The cloud takes this concept one step further.

## IPv6
- IANA is out of IP addresses. IPv6 is developed to address this issue.
- IPv4 addresses are 32 bits (around 4.2 billion individual addresses) where as Ipv6 are 128 bits ( 2 power 38 is undecillion addresses). You can give IP to every atom in the earth.
- Ipv6 is written as 8 groups of 16 bits each. A full IPv6 address will look something like this 2001:0db8:0000:0000:0000:ff00:0012:3456. This is way too long and IPv6 has a notation to break this more down.
- There are 2 rules when it comes to shortening an IPv6 address. The first is that you can remove any leading zeros from a group. The second is that any number of consecutive groups composed of just 0's can be replaced with 2 colons. Applying first rule to the earlier address - 2001:db8:0:0:0:ff00:12:3456. Applying second rule: 2001:db8::ff00:12:3456.
- IPv6 loopback address is ::1 or 37 zeros followed by 1.
- IPv6 address space has many several resereved address spaces.
- The Ipv6 is so huge that it do not need to split in to any address classes.
- The first 64 bits of Ipv6 address is NetworkID. The second 64 bits is HostID.
- IPv6 Headers: Version(version of IP), Class(type of traffic contained), Flow Label(quality of service level), payload length, Next Header (header after this one - optional), Hop Limit (similar to TTL), source and destination address, Data payload.
- Entire internet cannot switch to Ipv6 atonce. Hence Ipv6 and Ipv4 to coexist. IPv6 set aside number of address spaces that directly correlate to IPv4 addresses.
- IPv6 tunnels: Servers take incoming IPv6 traffic and encapsulate it within traditional Ipv4 datagram.
- IPv6 tunned Broker: Companies that provide Ipv6 tunneling endpoints for you, so you don't have to introduce additional equipment to your network.
- Test.
