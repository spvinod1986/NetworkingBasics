# Networking Basics
- Computer communicates similar to Human. Humans follows a series of rule during communication. For example, start with a greet and end with a greet. If there is a loud noise then the one person should ask other person to repeat what they just said. This is called protocol. A protocol is a defined set of standards that computers must follow in order to communicate properly.
- Computer networking is the name we have given to the full scope of how computers communicate with each other.
- Lots of models used in Computer Networking. TCP/IP is 5 layer model. OSI model is 7 layer model. These 2 are few of the famous models.

## TCP/IP 5 Layer Model
- Physical Layer: Represents the physical devices that inter connects computers. This includes specifications for network cables, connectors and specifications for sending/receiving signals.
- Data Link Layer: This is also called Network Access Layer. This is the layer where protocols will be introduced. This layer is responsible for defining a common way of interpreting these signals so network devices can communicate. Lots of protocol exist in this layer. The common one is Ethernet. The Ethernet standards also define a protocol responsible for getting data to nodes on the same network or link. Responsible for sending data across a single link.
- Network Layer: This is also sometimes called the internet layer. This allows different networks to communicate with each other through devices known and routers. A collection of networks connected together through routers is called Internetwork or Internet. Responsible for sending data across multiple networks. The most common protocol used in this layer is Internet Protocol or IP. IP is the heart of the internet and most smaller networks around the world.
- Transport Layer: Network layer delivers data between 2 individual nodes. Transport Layer sorts out which client and server programs are supposed to get that data. For example - In your desktop, you can have mail client and browser client open at same time both receiving data from servers at same time. Transport layer makes sure that each app receives its own data. The most common protocol in this layer is TCP or Transmission Control Protocol and UDP or User Datagram protocol. Difference between TCP and UDP - TCP ensures data is reliably delivered.
- Application Layer: Application specific layer. Most common protocol used in this layer is HTTP(browse the web), SMTP(protocol to send/receive mail).

## Networking Devices Basics
- Cables: Connects different devices to each other, allowing data to be transmitted over them. 2 categories. 1) Copper and 2) Fiber. 
- Copper Cables: Data is send over network as 0 and 1. Uses electrical voltage send 0 and 1. Most common twisted pair copper cables used Cat5(older), Cat5e, and Cat6 cables. Cat5e avoids cross talk. Cross talk is when an electrical puls on one wire is accidentally detected on another wire. Cat6 can data transfer fast and more reliably.
- Fiber Optic Cables: Contains individual optical fibers, which are tiny tubes made out of glass about the width of human hair. Uses of pulses of light to send 0 and 1.
- Hubs: This is a physical layer device that allows for connections from many computers at once. All computers in hub can send data between one another and each computer responsible for finding the data it requires. This causes lot of noise and leads to collision domain. Collision domain is a network segment where only one device can communicate at a time. so when one device is sending data, others should wait.This causes network delay and hence hubs are historical.
- Network Switch: Switch is a data link devices instead of physical layer device. This means switch can look at Eternet protocol data and see which system the data is intended for and only send data to that one system. Reduces collision and increases throughput.
- Routers: Hubs and Switches are primary devices used to connect computers on a single network usually referred to as LAN or Local Area Network. To send data to other networks we need routers. Routers is a device that knows how to forward data between independent networks. Router is Network Layer device. It can inspect IP data to know where to send things. Router has routing tables to know how to send data. The routers used in home is a very smaller one and it is responsible to just route the data to Internet Service Provider. The ISP will have set of more sophisticated routers which deals with more complexity to send data between multiple routers. The core ISP routers uses protocol known as BGP(Border Gateway Protocol) to share data between routers which let them learn about most optinal paths between routers to forward traffic.
- Servers and Clients: All sending/receiving computers are commonly referred as Nodes. But they can be further classified as Server(Sending data) and Client(Requesting data). Individual programs running in a system can be server and client to each other as well. In a network, a primary purpose of a machine is identified to call it either a server or client.

## Physical Layer
- Protocol: 10 Base T, 802.11. Protocol Data Unit: Bit. Addressing: N/A.
- Most Complex Layer. Consist of devices to transmit bit across network. Bit is 1 or 0. Copper cable carries this bit using Modulation. Modulation is a way of varying the voltage of the charge moving across cable. With respect to networking it is called Line Coding. So the encoder in sender converts digital data to signals(using modulation) and the receiving device decodes the the data bacck to digital data.
- Twisted pair cable is the most commonly used. cat 6 has 8 wires and 4 pairs of twistes cable. This allows duplex communication where 2 pairs are used for one way and other 2 pairs for the other way. Duplex is the oncept that information can flow in both directions across the cable. Simplex is unidirectional(example: Baby Monitor).
- Network Ports and Panels: RJ45 plug is the plug at the either end of copper cable which fits in RJ45 network port. This network port is directly attached to computing devices. Most of servers/computers have this port. Mobiles/laptop may use wireless networking and hence may not carry this port. This plug will have 2 lights. one is Link LED(will lit when cable is connected properly between 2 devices and both are powered on) and another is Activity LED(lit when data is transmitted). The same lights can be used in switches as well. Sometimes the network ports are mounted in wall and all these ports connect to Patch panel. Patch Panel is device containing many network ports and then additional cable is run to Switches or Routers.

## DataLink Layer
- Protocol: Ethernet, WiFi. Protocol Data Unit: Frames. Addressing: MAC Address.
- The responsibilty of this layer is to abstract the physical layer so that higher layers do not need to care about the physical devices used.
- Ethernet standard is very old and from 1980s. The ethernet standard today is very similar to that except for few changes to support higher bandwidth. Ethernet avoids data collision domain using CSMA/CD. CSMA/CD is used to determine when the communication channels are clear, and when a device is free to transmit data.
- MAC(Media Access Control) Address: This is a globally unique identifier attached to an individual network interface. It is a 48 bit number represented by 6 groupings of 2 hexa decimal numbers. It can also be represented using Octets. This address is globally unique. 2 power 48 is trillion possibility. It can be split in to 3 sections. The first 3 octets of MAC address is OUI(Organizationally Unique Identifier). These are assigned to individual hardware manufacturers by IEEE. It is 24 Bits/6 Hex digits/eg: 00 60 2F. The last 3 octets can assigned anyway a manufacturer would like but it should be used only once.
- Ethernet uses MAC addresses to enure that the data it sends has both an address for the machine that sent the transmission as well as the one the transmission was intended for.
- Unicast: Unicast: Transmission for one receiving address. If the least significant bit in the first octet of a destination address is set to Zero, it means that ethernet frame is intended for only the destination address. In ethernet, the data will be send to all devices in Local Network segment but only one will receive and process it.
- Multicast: Transmission for 2 or more receiving address. If the least significant bit in the first octet of a destination address is set to One, then it is a multicast frame. In ethernet, the data will be send to all devices in Local Network segment but only 2 or more devices will receive and process it.
- Broadcast: Transmission to all address. Broadcast address is all F's(FF:FF:FF:FF:FF:FF).
- Data Packet: An all-encompassing term that represents any single set of binary data being sent across a network link. This is just a concept of sending set of data from Point A to point B.
- Data packet at ethernet level is called Ethernet Frames. Ethernet frame is a highly structured collection of information presented in a specific order.
- Ethernet Frame: 8 bytes of Preamble, 6 bytes of Destination Address, 6 bytes of Source Address, 4 bytes of VLAN Tag, 2 bytes of Ether-type, 0 - 1,500 bytes of Payload, 4 bytes of FCS. Last bit in Preamble is SFD(Start Frame Delimiter) which signals receiving device that the preamble is over and the frame contents will now follow. Ether type is used to describe the protocol of the contents of the frame. VLAN header indicates that the frame itself is what's called VLAN frame. VLAN or Virtal LAN is a technique that allows you to have mutiple logical LANs operating in the same physical equipment. Helps to have single LAN that operates similar to having multiple LANs. Payload is the actual data being transported which is everything that is not a header. This contains all of the data from higher layers. FCS(Frame check sequence) represents checksum value for entire frame. The checksum value is calculated using Cyclical Redunancy Chdck. CRC is an important concept of computing and used everywhere for data integrity. CRC uses polynomial function to calculate the checksum number from a given data. Then in receiving end the CRC is done again on received data and the checksum is verified to be same. This helps the receive to find if there is a lost or corrupted data. If there is corrupted data then the higher layer will decide if the data should be retransmitted.

## Network Layer
- Protocol: IP. Protocol Data Unit: Datagram. Addressing: IP Address.
- In LAN, systems can communicate with one another using MAC addresses. But this cannot scale for large distance communication because MAC addresses are not ordered (a system with a MAC address can be anywhere in the world). The Network layer and the internet protocol is the solution for that problem.
- IP Addresses: 32 bits long; 4 Octet; 1 Octet/8 bits of data. Represented by dotted decimal notation.
- IP Addresses are distributed to various companies or organization and hence the router will know to which router a request should be forwarded to based on address. IP Addresses belong to networks, not to the devices attached to those networks. Hence MAC address will remain same where you connect, but IP address changes based on where you connect.
- When you connect a device to network, IP address is assigned automatically using Dynamic Host Configuration Protocol. This is called Dynamic IP address. Static IP addres is the one configured manually. Static IP addresses are reserved for servers and network devices while dynamic IP addresses are reserved for clients.
- IP Datagrams: Data packet at network layer is called IP datagram. It is highly structured series of fields that are strictly defined. IPv4 is the version currently used. The IP data packet has more information than data link layer. Version(IPv4 or IPv6), Header length, service type(QOS - helps which IP data is more important than other), total length, identification (A single datagram is about 65535(maximum value of 16 bits). If the total amount of data that needs to be sent is larger than what can fit in a single datagram, the IP layer needs to split this data up into many individual packets. If this happens then identification fields is used to find every packet is part of same transmission.), flag field(to indicate if the data can be fragmented), fragment offset (required to fragment datapackets in to smaller data packets if data is moved between networks which accept different data packet size), Time to Live(indicates how many router hops a datagram can traverse before it is thrown away), protocol (indicates trasport level protocol used (tcp/udp)), Header checksum (checksum for entire IP header), source ip address,  destination ip address, IP options field (used to set special characteristics for testing purpose), padding field (this is series of 0's to maintain length).
- The data payload section in Ethernet data packet is exactly same as IP datagram.This is called encapsulation. IP datagram also has a payload section which carries TCP/UDP datagram.
- IP address can be split in to 2 sections. 1) Network Id and 2) Host Id. For example: 9.100.100.100, 9 or the first octet is the NetworkID and reminder are host ID. IP address class system is the way of defining how the global IP address space is split up. 3 types of Address Classes. 1) Class A (first octet is used for network ID and reminder for Host ID)2) Class B(first 2 octets used for network ID and reminder for Host ID) and 3) Class C(first 3 octets are used for network ID and final octet to host ID).
- Class A address starts with 0 and the possible values are 0 - 126. Class B address starts will 1 and the possible values are 128 - 191. Class C address starts with 10 and possible values are 192 - 224. Class D and E are not so important and used for multi casting and testing.
- ARP (Address Resolution Protocol) - Used to discover hardware address of a node with certain IP address. ARP table is the list of IP addresses and the MAC addresses associated to them. ARP table generally expires after a short amount time to ensure changes in the network are accounted for.
- Subnetting: Subnetting is the process of taking large network and split in to smaller subnetworks.
- Subnet masks: so when a data is send to 9.0.0 class A address, the core routers send the data to gateway router of 9.0.0 class A address. Then the gateway router locates the system using host ID and sends the data to system. But in class A you can have around 126 million host ID's. so for such cases you may need subnet where the gateway router can send the data to subnet router and that sends the data to system. This results in another ID called Subnet ID. The subnetId is part of HostId and is calculated using Subnet Mask. A subnet mask is a way for a computer to use AND operators to determine if an IP address exists in same network.
- CIDR (Classless InterDomain Routing): Using CIDR, the network ID and subnet ID are combined in to one.
- Routing: Routing is the process of routing data from network A to network B. The data will hop off between different router until it reaches final destination. Routing is done using Routing table which will have 4 columns. Destination column(IP and net mask), Next hop(IP address of next router intended to destination), total hops(used to calculate shortest path), interface. Core router will have millions of rows in routing tables. Routing tables are always updated to find shortest path to destinations aorund them. They use Routing protocols which is a special protocol used by routers to speak with each other. 2 categories of Routing protocols. 1) Interior gateway protocols and 2) Exterior gateway protocols.
- Interior gateway protocols are used by router to share information within a single autonomous system(collection of network that all fall under single network operator). Exterior gateway protocols are used by router to share information between independent autonomous systems.
- 2 types of Interior gateway protocols. 1) Link state routing (each router propagates its state to every other router in autonomous system) 2) distance vector(older standards - a router takes its routing table and sends to every router. In computer science, a list is called as vector).
- Exterior gateway protocols: IANA or Internet Assigned Numbers Authority is a non-profit organization that helps manage things like IP address allocation. IANA is also responsible for autonomous sytem number allocation. ASN's are 32 bits number assigned to autonomous systems. Looking at ASN routers can find to which autonomous network or organisation the data should route to.
- Non Routable address space - IP address is a 32 bit number which represents 4 billion unique numbers. But there are 2017 8 billion people on earth. Hence IPv4 standard does not even have enough IP addresses available for every person on planet. Hence 3 ranges of IP address are kept seperately as non routable address space which can be used by anyone but they will not be routed to by any gateway router. 1) 10.0.0.0/8 2) 172.16.0.0/12 3) 192.168.0.0/16. These ranges are free for anyone to use in their internal network. Hence Internal gateway protocols will know about it but exterior gateway protocols will not know about it.

## Transport Layer
- Protocol: TCP/UDP. Protocol Data Unit: Segment. Addressing: Port numbers.
- This layer allows traffic to be directed to specific applications.
- Transport layer can Multiplex (nodes on network direct traffic from many different services) and Demultiplex traffic (nodes on network receive traffic from many different services).
- Transport layer does multiplexing and demultiplexing using Ports. A port is a 16 bit number that is used to direct traffic to specific services running on a networked computer. A service in the server listens to an incoming request in specific port. For example: a service which listens to HTTP protocol listens at port number 80 and hence the address will be 10.1.1.100:80. This is called Socket number.
- TCP segment: IP datagram(payload section) encapsulates TCP segment. TCP segment is made of TCP header and data(payload) section. Source Port(ephemeral port), Destination Port(port 80 for web server), Sequence number(to keep track of tcp segments), Acknowledgement number(number of next expected segment), Header Length, Control flags, Windows(specifies the range of sequence number before acknowledgement is required), checksum, Urgent (used with TCP flags to find the segments more important than another), Options, Padding, Data Payload.
- Control Flags: URG - A value of one here indicates that the segment is important. ACK - A value of one here indicates Acknowledgement number should be examined. PSH - The device wants the receiving device to push currently buffered data to the application on the receiving end as soon as possible. RST - one of the TCP connection had not been properly able to recover from a series of missing segments. SYN - Used when first establishing TCP connection and makes sure the receiving end knows to examine the sequence number field. FIN - A value of one here means the transmitting computer does not have any more data to send and connection can be closed.
- TCP traffic flow: Computer A first sends segment with SYN flag to computer B. This is way computer A is saying lets establish a connection and see where my sequence number starts. B then responds with TCP segment with both SYN/ACK flags set. This is how computer B says lets establish a connection and here is my acknowledgement. Computer A then responds with only ACK flag set. A says I acknowledge your acknowledgement. This is called 3 way handshake and it happens everytime a TCP connection is established. As now both A and B has established connection using 3 way handshake, both the computers are now operating in full duplex. Now A can send any data to B. Each segment send in either direction should be acknowledged with ACK segment. When A is ready to close, then four way handshake happens. A sends FIN, and B responds with ACK, and then A sends FIN again and B sends ACK again.
- TCP Socket States: A socket is an instanatiation(actual implementaion of something defined else where) of an end point in a potential TCP connection. TCP sockets requires actual programs to instantiate them. You can data to a computer in any port you want but you will actually get a response only if the program in that computer has opened a socket to that port. 
- TCP sockets can exist in lot of state. Here are the common ones. LISTEN - TCP socket is ready and listening for incoming connections. You will see this in server side only. SYN_SENT - A synchronization request has been sent but the connection has not been established yet. You will see this in client side only. SYN-RECEIVED - A socket previously in LISTEN state has received a synchronization request and sent as SYN/ACK back. This is seen in server side only. ESTABLISHED - TCP connection is in working order and both sides are free to send each other data. Seen in both client and server.FIN_WAIT - A FIN has been sent but the corresponding ACK from the other end has not been received yet. CLOSE_WAIT - The connection has been closed at TCP layer but the application that opened the socket has not released its hold on the socket yet. CLOSED - the connection is fully terminated and no further communication is possible.
- TCP is a connection oriented protocol. Connection Oriented protocol is the one which establishes a connection, and used this to ensure that all data has been properly transmitted. Every segment sent is acknowledged. There is a lot of overhead on this protocol and connection less protocol or UDP do not have this overhead. Streaming video is an example of UDP.
- Firewalls: A device that blocks traffic that meets certain criteria. Required to keep network secure. It can work in lot of layers. There are firewalls which can work in application layer, blocking ranges of IP address. It is most commonly used in Transport layer. Usally have configuration to block traffic for certain ports while allowing traffic for other ports.

## Application Layer
- Protocol: HTTP, SMTP, FTP etc. Protocol Data Unit: Messages. Addressing: N/A.
- This layer allows applications to communicate in a way they understand.
- TCP segment payload section encapsulates the application layer protocol message. This protocol depends on the application. HTTP protocol to talk between web browser in client and web server (IIS/APACHE/Nginx).
- OSI: Open Systems InterConnection Model has 7 layers and introduces 2 new layers between Transport layer and Application Layer. 1) Session Layer - Facilitating communication between actual applications and transport layer. Takes the application layer data and hands it off to the presentation layer 2) Presentation Layer - Responsible for making sure that the unencapsulated application layer data is able to be understood by the application in question.

## Networking Services
- DNS: IP is 32 bit binary number but it is usually written in 4 octet decimal form because it is easier for humans to read.


